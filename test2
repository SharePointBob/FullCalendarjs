function modifyTableRows() {
    // Select each row you want to modify based on a common class
    $('tr.borderbottom.v4').each(function() {
        var $row = $(this);

        // Find all checkboxes in the row that end with 'N', representing 'No' choices
        $row.find('input[type="checkbox"][id$="N"]').each(function() {
            var $noCheckbox = $(this);
            var noCheckboxId = $noCheckbox.attr('id');
            var baseId = noCheckboxId.slice(0, -1);  // Remove the last character 'N' to get the base ID
            var baseName = $noCheckbox.attr('name');

            // Ensure a Yes checkbox exists; if not, create it and its TD
            var $yesCheckbox = $row.find('input[type="checkbox"][id="' + baseId + 'Y"]');
            if ($yesCheckbox.length === 0) {
                $yesCheckbox = $noCheckbox.clone()
                    .attr('id', baseId + 'Y')
                    .removeAttr('listFieldName');
                var $yesTd = $('<td>').append($yesCheckbox);
                $noCheckbox.closest('td').before($yesTd);  // Insert the Yes TD before the No checkbox TD
            }

            // Adjust the No checkbox into its own TD if not already
            if (!$noCheckbox.parent().is('td')) {
                var $noTd = $('<td>').append($noCheckbox.detach());
                $yesCheckbox.closest('td').after($noTd);
            }

            // Create or update the hidden checkbox
            var $hiddenCheckbox = $row.find('input[type="checkbox"][id="' + baseId + '_hidden"]');
            if ($hiddenCheckbox.length === 0) {
                $hiddenCheckbox = $('<input>', {
                    type: 'checkbox',
                    id: baseId + '_hidden',
                    name: baseName,
                    style: 'display: none;',
                    'listFieldName': baseName  // The hidden checkbox holds the listFieldName
                });
                $row.find('td:last').append($hiddenCheckbox);  // Append hidden checkbox to the last TD
            }

            // Reset hidden checkbox to match any pre-checked states when loading
            if ($yesCheckbox.is(':checked')) {
                $hiddenCheckbox.val('Y').prop('checked', true);
            } else if ($noCheckbox.is(':checked')) {
                $hiddenCheckbox.val('N').prop('checked', true);
            }

            // Assign onchange events to handle checkbox interactions
            $yesCheckbox.off('change').on('change', function() {
                $hiddenCheckbox.val('Y').prop('checked', this.checked);
                $noCheckbox.prop('checked', false);
            });

            $noCheckbox.off('change').on('change', function() {
                $hiddenCheckbox.val('N').prop('checked', this.checked);
                $yesCheckbox.prop('checked', false);
            });
        });
    });
}

$(document).ready(function() {
    modifyTableRows();
});